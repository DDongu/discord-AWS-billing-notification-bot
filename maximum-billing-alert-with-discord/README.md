# λ””μ¤μ½”λ“ AWS μμ‚°μ΄κ³Ό μ•λ¦Ό λ΄‡

### π“ μ£Όμ”κΈ°λ¥ 

β… μμ‚°μ΄κ³Ό μ•λ¦Ό

: μμ‚°μ—μ„ μ„¤μ •ν• κΈμ•΅μ΄ μ΄κ³Όλ  λ•λ§λ‹¤ μλ™μΌλ΅ μ•λ¦Όμ„ λ³΄λ‚΄μ¤λ‹λ‹¤.

![alt text](images/image.png)

---

## μ¤€λΉ„

#### 1. λ””μ¤μ½”λ“ μ±„λ„μ—μ„ μ›Ήν›…μ„ λ§λ“¤μ–΄ URLμ„ λ³µμ‚¬ν•©λ‹λ‹¤.

#### 2. λ³µμ‚¬ν• URLμ„ `lambda_function.py` νμΌ λ‚΄μ `DISCORD_WEBHOOK_URL = "λ””μ¤μ½”λ“_μ›Ήν›…_URL"` κ°’μ— λ¶™μ—¬λ„£μµλ‹λ‹¤.

## μ‚¬μ©λ°©λ²•
### 1. Lambda ν•¨μ μƒμ„±
μ‚¬μ§„μ„ μ°Έκ³ ν•΄ `Lambda > ν•¨μ`λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

![alt text](images/image-1.png)
-> `ν•¨μ μ΄λ¦„`:  billing-alert-with-discord<br>
-> `λ°νƒ€μ„`: Python 3.12<br>
=> λ‚λ¨Έμ§€λ” Defaultλ΅ λ‘κ³  μƒμ„±ν•©λ‹λ‹¤.<br>

![alt text](images/image-2.png)
-> μƒμ„±μ΄ μ™„λ£λλ©΄ λ§λ“  ν•¨μλ¥Ό ν΄λ¦­ν•©λ‹λ‹¤.

![alt text](images/image-3.png)
-> ν•΄λ‹Ή ν™”λ©΄μ„ ν™•μΈν•κ³ , μ½”λ“ νƒ­μ„ μ„ νƒν•©λ‹λ‹¤.

![alt text](images/image-4.png)
-> `lambda_function.py`μ— μ†μ¤μ½”λ“λ¥Ό λ¶™μ—¬λ„£μµλ‹λ‹¤.
-> Deploy λ²„νΌμ„ ν†µν•΄ λ°°ν¬λ¥Ό ν•©λ‹λ‹¤.

### 2. SNS μ£Όμ  μƒμ„±
μ‚¬μ§„μ„ μ°Έκ³ ν•΄ `Amazon SNS > μ£Όμ `λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

![alt text](images/image-5.png)

![alt text](images/image-6.png)
-> `ν‘μ¥°`μ„ μ„ νƒν•©λ‹λ‹¤.
-> `μ΄λ¦„`μ„ κΈ°μ…ν•©λ‹λ‹¤.
-> λ‚λ¨Έμ§€λ” Defaultλ΅ λ‘κ³  μƒμ„±ν•©λ‹λ‹¤.

![alt text](images/image-7.png)
-> μƒμ„±λ μ£Όμ λ¥Ό ν΄λ¦­ν•μ—¬ ν•΄λ‹Ή ν™”λ©΄μ„ ν™•μΈν•©λ‹λ‹¤.
-> `κµ¬λ… μƒμ„±` λ²„νΌμ„ ν΄λ¦­ν•μ—¬ κµ¬λ… μƒμ„±ν™”λ©΄μΌλ΅ λ„μ–΄κ°‘λ‹λ‹¤.

![alt text](images/image-8.png)
-> ν”„λ΅ν† μ½μ—μ„ `AWS Lambda`λ¥Ό μ„ νƒν•κ³ , μ„μ—μ„ λ§λ“  λλ‹¤λ¥Ό μ„ νƒν•©λ‹λ‹¤.

=> `κµ¬λ… μƒμ„±` λ²„νΌμ„ ν΄λ¦­ν•μ—¬ κµ¬λ…μ„ μƒμ„±ν•©λ‹λ‹¤.

### 3. μμ‚° μƒμ„±
μ‚¬μ§„μ„ μ°Έκ³ ν•΄ μμ‚°μ„ μƒμ„±ν•©λ‹λ‹¤.

![alt text](images/image-9.png)
-> `μμ‚° μƒμ„±` λ²„νΌμ„ ν΄λ¦­ν•©λ‹λ‹¤.

![alt text](images/image-10.png)

![alt text](images/image-11.png)

![alt text](images/image-12.png)

![alt text](images/image-13.png)

![alt text](images/image-14.png)
-> μ„μ—μ„ λ§λ“  SNS μ£Όμ μ arnμ„ λ¶™μ—¬λ„£μµλ‹λ‹¤.


## μ°Έκ³ μ‚¬ν•­

- μμ°¨μ μΌλ΅ μ„¤μ •ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

- μ‘λ™λ°©μ‹μ€ `μμ‚°(μ•λ¦Ό νΈλ¦¬κ±°) -> SNS -> κµ¬λ… -> λλ‹¤` μ…λ‹λ‹¤.

- μ•λ¦ΌμΌλ΅ μ„¤μ •ν• μμ‚° μ΄κ³Ό μ‹, λ©”μΌμ€ μ¤μ§€λ§ Lambdaλ¥Ό μ‹¤ν–‰ν•μ§€ λ»ν•  λ•λ” `SNS <-> Lamdba` κ°„μ κ¶ν• λ¬Έμ μΌ μλ„ μμµλ‹λ‹¤.
